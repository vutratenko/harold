<img title="Harold" alt="a brancing service for R1 staging k8s cluster" width=250px
  height=auto src="https://vignette.wikia.nocookie.net/fallout/images/0/0f/FO02_NPC_Harold_G.png/revision/latest?cb=20100812023117">

# harold

Harold - сервис управления списком DEV окружений

## Описание
Harold - это сервис управления списком DEV окружений. Слушает HTTP запросы, ходит в базу (postgresql), где хранится сам список. Больше не делает ничего. Только CRUD к базе и нормализация имён окружений: все не цифробуквенные знаки кроме `-` (дефиса) будут заменены на `---` (тройной дефис).

## Использование
`GET /branches`
Возвращает список (list) созданных окружений

`POST /branches`
Принимает JSON структуру `{'name': 'имя ветки'}` для создания неймспейса с таким именем. Если такой неймспейс существует, просто обновляет ему значение `last_change_timestamp` на `now()`.

`DELETE /branches`
Принимает JSON структуру `{'name': 'имя ветки'}`, обозначая удаление неймспейса.

## Известные проблемы
- Kubernetes не позволяет создавать окружения, имя которых начинается с цифры. В сервисе такой проверки нет. Попытка создания иакого окружения приведёт к поломке системы.
